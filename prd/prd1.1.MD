好的，收到v1.1的迭代指令。

本次迭代的核心是**增强产品的个性化、可信度与即时可用性**，我将围绕这个目标，更新PRD文档，确保所有变更点都清晰、无歧义地传达给开发团队。

---

### **产品需求文档 (PRD): “一拳膳食” 网页版 MVP v1.1**

*   **版本：** v1.1
*   **日期：** 2023年10月28日
*   **项目代号：** 一拳膳食 (FistFuel)
*   **目标读者：** 前端开发团队, UI/UX设计师, 产品经理

---

### **1. 修订历史**

| 版本 | 日期 | 修订内容 | 修订人 |
| :--- | :--- | :--- | :--- |
| v1.1 | 2023-10-28 | **引入个性化计算算法；重构主界面为分餐显示；更新设置页文案与选项。** | [助理姓名] |
| v1.0 | 2023-10-27 | 初版创建，定义了包含身高/体重输入的基础流程。 | [助理姓名] |

### **2. 产品概述与愿景 (无变更)**

*   **产品形态：** 纯前端响应式网页工具。
*   **一句话定位：** 一个无需计算卡路里，用“手”就能估算饮食份量的健康膳食规划器。
*   **核心理念：** 传递“轻松掌控”的积极生活态度，用最直观的方式帮助用户开启健康饮食。

### **3. v1.1 迭代目标**

本次迭代的核心目标是通过引入**个性化计算**和**分餐展示**，增强产品的**个性化、可信度与即时可用性**，让用户感觉到这不仅是一个通用模板，更是为“我”量身定制的、可以直接执行的行动方案。

### **4. 功能范围 (Scope)**

*   **变更项：**
    *   **设置页：** 更新文案和目标选项。
    *   **核心算法：** 从固定规则表升级为基于用户身高、体重的动态计算逻辑。
    *   **主规划页：** 从展示“每日总量”重构为展示“早、中、晚”三餐的具体份量建议。
*   **其他范围定义保持v1.0不变。**

---
### **5. 核心用户流程与页面详述 (v1.1 更新)**

#### **5.1. 页面一：首次访问设置页 (Setup Page) - [变更]**

*   **用户故事：** 作为一个新用户，我希望能用更酷、更直接的语言被吸引，并选择一个更符合我诉求的目标，快速完成设置。
*   **界面元素与文案 (v1.1 更新)：**
    1.  **大标题 (H1)：** `一拳搞定营养餐`
    2.  **副标题 (H2)：** `还在算热量？太麻烦了！伸出你的手，轻松规划每一餐。`
    3.  **问题1：你的主要目标是？ (单选，横向排列)**
        *   `[ 减脂塑形 ]`
        *   `[ 均衡营养 ]`
        *   (小字补充说明): `为身体和大脑提供每日活力`
        *   `[ 增肌增重 ]`
    4.  **问题2：你的基本信息？** (无变更)
        *   `身高: [      ] cm`
        *   `体重: [      ] kg`
    5.  **行动按钮：** `[ 完成，开始规划 ]` (无变更)

**低保真线框图 (S1: 设置页 v1.1)**
```
+----------------------------------------+
|                                        |
|           一拳搞定营养餐 👊            |
| 还在算热量？太麻烦了！伸出你的手...      |
|                                        |
|   你的主要目标是？                     |
| +----------+ +----------+ +----------+ |
| | 减脂塑形 | | 均衡营养 | | 增肌增重 | |
| +----------+ +----------+ +----------+ |
|              为身体和大脑...           |
|                                        |
|   你的基本信息？                       |
|   身高  [ 175 ] cm                     |
|   体重  [ 70  ] kg                     |
|                                        |
|   +----------------------------------+ |
|   |       完成，开始规划             | |
|   +----------------------------------+ |
+----------------------------------------+
```

#### **5.2. 页面二：主页面 / 分餐规划页 (Meal Plan Page) - [重构]**

*   **用户故事：** 我希望打开页面后，不是看到一个需要我自己分配的总量，而是直接看到下一餐具体该吃什么的、立即可执行的建议。
*   **功能描述 (v1.1 重构)：**
    *   此页面不再展示“每日总规划”，而是重构为以【早餐】、【午餐】、【晚餐】为单位的分餐卡片视图。
    *   每张卡片清晰列出该餐建议的营养素份量。
    *   份量数据来源于新的个性化算法和分餐逻辑。
*   **界面元素与文案 (v1.1 重构)：**
    1.  **顶部导航栏：** `一拳膳食` | `重新设置 ⚙️` (无变更)
    2.  **页面布局：**
        *   **卡片一：早餐推荐 ☀️**
            *   `蛋白质: ✋ x 1.5 份`
            *   `碳水:   ✊ x 1.5 份`
        *   **卡片二：午餐推荐 🕛**
            *   `蛋白质: ✋ x 2 份`
            *   `碳水:   ✊ x 2 份`
            *   `蔬菜:   🤲 x 2 份`  *(固定推荐)*
            *   `脂肪:   👍 x 1 份`
        *   **卡片三：晚餐推荐 🌙**
            *   `蛋白质: ✋ x 1.5 份`
            *   `蔬菜:   🤲 x 2 份`  *(固定推荐)*
            *   `脂肪:   👍 x 1 份`
    3.  **引导链接/按钮：** `[ 查看如何估算？🤔 ]` (无变更, 点击跳转S3)

**低保真线框图 (S2: 分餐规划页 v1.1)**
```
+----------------------------------------+
| 一拳膳食                     重新设置⚙️ |
|----------------------------------------|
|                                        |
|   ┌──────────────────┐   |
|   │ 早餐推荐 ☀️                      │   |
|   │ 蛋白质: ✋ x 1.5 份              │   |
|   │ 碳水:   ✊ x 1.5 份              │   |
|   └──────────────────┘   |
|                                        |
|   ┌──────────────────┐   |
|   │ 午餐推荐 🕛                      │   |
|   │ 蛋白质: ✋ x 2 份                │   |
|   │ 碳水:   ✊ x 2 份                │   |
|   │ 蔬菜:   🤲 x 2 份 (推荐)         │   |
|   │ 脂肪:   👍 x 1 份                │   |
|   └──────────────────┘   |
|                                        |
|   ┌──────────────────┐   |
|   │ 晚餐推荐 🌙                      │   |
|   │ 蛋白质: ✋ x 1.5 份              │   |
|   │ 蔬菜:   🤲 x 2 份 (推荐)         │   |
|   │ 脂肪:   👍 x 1 份                │   |
|   └──────────────────┘   |
|                                        |
|      [ 查看如何估算？ 🤔 ]           |
+----------------------------------------+
```

#### **5.3. 页面三：“可视化度量衡指南”页 (Guide Page) - [无变更]**
*   此页面内容和结构保持v1.0版本不变，继续作为核心概念的说明页。

---
### **6. 核心技术要求与算法逻辑 (v1.1 更新)**

#### **6.1 & 6.2. 开发方式 & 数据存储 (无变更)**
*   **开发方式：** 纯前端 (HTML/CSS/JavaScript)。
*   **数据存储：** 浏览器 `localStorage`。
    *   **数据结构 (v1.1 更新)：**
        ```json
        {
          "goal": "减脂塑形", // "减脂塑形", "均衡营养", "增肌增重"
          "height": 175,
          "weight": 70
        }
        ```

#### **6.3. v1.1 推荐算法逻辑 (个性化计算) - [核心变更]**

请在前端JavaScript中实现以下三步计算与分配逻辑：

**第一步：计算基础热量值 (Base Value)**
*   基于用户输入的身高和体重，计算一个统一的、简化的基础值。
*   **公式：** `BaseValue = (10 * 用户体重kg) + (6.25 * 用户身高cm) - 150`

**第二步：根据目标计算每日总热量 (Total Calories)**
*   使用乘数因子调整基础值，得出每日推荐的总热量。
*   **规则：**
    *   `IF 目标 = '减脂塑形' THEN TotalCalories = BaseValue * 1.1`
    *   `IF 目标 = '均衡营养' THEN TotalCalories = BaseValue * 1.3`
    *   `IF 目标 = '增肌增重' THEN TotalCalories = BaseValue * 1.5`

**第三步：将总热量换算为每日总份数 (Daily Portions)**
*   将总热量按宏量营养素比例进行分配，并换算为“手部估算”的份数。
*   **换算规则：**
    *   `蛋白质总份数 = (TotalCalories * 40%) / 150`
    *   `碳水总份数   = (TotalCalories * 40%) / 150`
    *   `脂肪总份数   = (TotalCalories * 20%) / 100`
*   **技术备注：** 计算结果需**四舍五入到最接近的 0.5** (例如 2.3 -> 2.5, 2.1 -> 2.0)。可使用 `Math.round(value * 2) / 2` 实现。

#### **6.4. v1.1 分餐与展示逻辑 (新增)**

**第一步：按 3:4:3 比例分配每日总份数**
*   将上一步计算出的各营养素**每日总份数**，按早、中、晚 `30% : 40% : 30%` 的比例进行分配。
*   **示例 (蛋白质总份数为5份时):**
    *   早餐蛋白质 = `5 * 0.3 = 1.5` 份
    *   午餐蛋白质 = `5 * 0.4 = 2` 份
    *   晚餐蛋白质 = `5 * 0.3 = 1.5` 份
*   *（分配后的结果同样需遵循四舍五入到0.5的规则）*

**第二步：应用特定餐食的展示规则**
*   为了更合理的膳食结构，部分营养素不在所有餐食中展示。
*   **规则：**
    *   **蔬菜 (🤲)：** **不参与热量计算**。作为固定推荐项，在【午餐】和【晚餐】中各展示 **2份**。
    *   **蛋白质 (✋) 和 脂肪 (👍)：** 在三餐中均按比例展示。


### **7. UI/UX 设计原则与实现指南**

#### **7.1. 核心设计理念：轻松掌控 (Effortless Control)**

我们的产品体验必须围绕以下三个核心感受构建：

*   **赋能感 (Empowering):** 设计和文案应让用户感到自己主动掌控了健康，而非被动接受指令。
*   **轻松感 (Effortless):** 交互流程必须极致顺畅，视觉元素干净、无压力，让用户觉得“健康饮食原来这么简单”。
*   **积极感 (Positive):** 从色彩到布局，都要传递一种乐观、充满活力的生活态度。

#### **7.2. 参考案例：Headspace**

我们借鉴 Headspace 的策略，学习其如何通过一致性的设计语言，成功营造出一种**专业、可信赖且具有情感吸引力**的品牌氛围。虽然我们不复制其视觉风格，但我们追求同样的效果：让用户在首次接触时就产生好感和信任。

#### **7.3. 视觉风格与执行指南**

**A. 色彩体系 (Color Palette)**

*   **主色调 (Primary Color / 行动色):**
    *   **活力绿 (Vibrant Green):** (建议色值: `#2ECC71` 或类似) 用于所有可点击的主要行动按钮（如“完成，开始规划”），代表健康、活力与积极行动。
*   **辅助色 (Secondary Colors):**
    *   **柔和米白/浅灰 (Soft Off-White / Light Gray):** (建议色值: `#F7F7F7` 或 `#FAFAFA`) 作为页面背景色，替代刺眼的纯白，营造温暖、舒适的视觉基调。
    *   **品牌深灰 (Brand Dark Gray):** (建议色值: `#333333`) 用于主标题和重要文字，确保可读性，比纯黑更柔和。
    *   **中性灰 (Neutral Gray):** (建议色值: `#555555` 或 `#777777`) 用于副标题、说明文字和标签，与主标题拉开视觉层次。

**B. 字体选择 (Typography)**

*   **原则：** 友好、清晰、现代。
*   **建议 (可从Google Fonts免费获取):**
    *   **标题字体：** **Nunito** 或 **Poppins** (使用加粗 `Bold` 字重)。其圆润的字形能带来亲和感。
    *   **正文字体：** 使用与标题同族的常规 `Regular` 字重，确保在各种尺寸下都清晰易读。

#### **7.4. 页面具体实现指南 (Page Implementation Guide)**

本节是解决当前UI问题的**强制性设计规范**，请严格遵循。

**A. 全局布局原则**

*   **统一中轴线：** 页面所有内容块（标题组、目标选择区、信息输入区、按钮）都应**整体居中对齐**，形成一条清晰的垂直轴线。这能创造出稳定、专业的视觉效果。
*   **呼吸感与间距：** 必须在不同内容块之间留出足够的垂直间距（例如，标题区与目标选择区之间留出 `48px`，目标选择区与信息输入区之间留出 `48px`），避免拥挤感。

**B. S1: 设置页 - 详细设计修正案**

**1. 标题区 (Header Section)**
   * **布局：** 整体居中。
   * **H1 标题 (`一拳搞定营养餐 👊`):**
     * 使用品牌深灰（`#333333`）。
     * 使用加粗的品牌字体。
     * Emoji `👊` 应与文字在垂直方向上居中对齐，并留有适当间距。
   * **H2 副标题 (`还在算热量？...`):**
     * 使用中性灰（`#555555`）。
     * 使用常规字重的品牌字体。

**2. 目标选择区 (Goal Selection Section)**
   * **布局：** 该区域整体居中，包含一个标题和三个选项卡片。
   * **区域标题 (`你的主要目标是？`):** 使用中性灰，与下面的卡片组保持居中对齐。
   * **选项卡片 (Option Cards):**
     * **结构：** 每个选项都是一个独立的、可点击的“卡片”。**补充说明文字必须包含在卡片内部**，这是对当前UI最关键的修正。
     * **样式：**
       * **背景：** 纯白色。
       * **边框：** 1px的浅灰色边框（`#E0E0E0`），并带有较大的圆角（`12px`或`16px`）。
       * **阴影：** 使用非常柔和、弥散的阴影，营造轻微的悬浮感。
     * **卡片内部布局：**
       * Emoji和目标文字（如 `🔥 减脂塑形`）在卡片内左侧对齐。
       * 补充说明文字（如 `为身体和大脑提供每日活力`）在目标文字下方，同样左对齐，并使用更小的字号和更浅的灰色。
       * **内边距 (Padding):** 卡片必须有足够的内边距（如 `16px`），确保内容不会贴着边缘。
     * **选中状态：** 用户点击后，卡片的**边框颜色变为品牌活力绿 (`#2ECC71`)**，并可增加一个更明显的绿色阴影作为强调。

**3. 基本信息区 (Basic Info Section)**
   * **布局：** 该区域整体居中，包含一个标题和两个输入框组。
   * **区域标题 (`你的基本信息？`):** 样式同“目标选择区”的标题。
   * **输入框组 (Input Groups):**
     * **排列：** 两个输入框**并排显示**，作为一个整体居中。
     * **标签：** **将标签（`身高`、`体重`）放置在对应输入框的正上方**，并使用较小的字号和中性灰色。
     * **输入框样式：** 与卡片风格保持一致，使用浅灰色边框、大圆角。内部文字（`175`, `cm`）要有足够的内边距。

**4. 行动按钮 (Action Button)**
   * **布局：** 整体居中。
   * **样式：**
     * **颜色：** 背景使用品牌主色调——**活力绿**，文字为白色。
     * **尺寸：** 宽度与上方的两个输入框总宽度大致相同，不宜过宽或过窄。
     * **交互：** 鼠标悬停（Hover）或点击（Active）时，应有颜色变深或轻微的位移/缩放效果，提供明确的视觉反馈。

#### **7.5. 修正后的视觉效果示意**

基于以上规范，修正后的页面应呈现出以下特征：
*   所有元素沿一条无形的中心线整齐排列。
*   “均衡营养”下的说明文字被正确地包含在卡片内部。
*   卡片和输入框拥有统一的圆角、边框和柔和阴影，风格一致。
*   色彩和字体遵循品牌定义，营造出专业、友好的氛围。
*   页面拥有足够的留白，看起来清爽、不拥挤。
---
**[文档结束]**

### **致 UI 设计师/前端开发团队：网页UI优化指令**

你好，

感谢你前期的工作。为了让我们的“一拳膳食”产品在视觉和体验上达到一个新高度，我希望能对当前的UI进行一次彻底的优化。

目前的设计在对齐、间距和整体风格上存在一些问题，显得不够专业和精致。我希望最终的产品能给用户带来**简洁、现代、清晰且值得信赖**的感觉。

请参考以下具体要求进行优化：

**1. 整体风格与参考**

*   **核心参考：** **Shadcn/ui (https://ui.shadcn.com/)**。
*   **设计理念：** 我们要追求 Shadcn/ui 那种**干净、实用且高度结构化**的风格。它非常适合我们的工具类应用。请特别关注其对**边框、圆角、间距和信息层级**的处理方式。

**2. 布局与对齐 (Layout & Alignment)**

*   **问题：** 当前页面元素（特别是设置页的三个目标选项）没有对齐，导致视觉混乱。
*   **解决方案：**
    *   **建立严格的网格系统：** 所有元素必须在一个清晰的网格中对齐。请在 Figma 或其他设计工具中使用网格或栅格系统。
    *   **统一的容器宽度：** 所有页面的主要内容区域（从标题到按钮）应该被包裹在一个**固定宽度、水平居中**的容器内。例如，在桌面端，这个容器的最大宽度可以是 `560px` 或 `640px`。这能避免内容在宽屏上散开。
    *   **垂直对齐：** 在设置页，三个目标选项卡片应该**垂直堆叠**，并且**左侧边缘严格对齐**。请不要再使用左右分散的三栏布局，那非常难以对齐和适配。

**3. 色彩与字体 (Color & Typography)**

*   **配色方案：**
    *   **背景：** 使用 Shadcn/ui 风格的**柔和灰度背景** (e.g., `hsl(0 0% 98%)` / `#F9FAFB`)。
    *   **内容区域：** 卡片(Card)和输入框(Input)使用**纯白色背景** (`#FFFFFF`)，与灰色背景形成微妙而清晰的对比。
    *   **主色调（行动色）：** 保持我们选定的**活力绿**，但可以调整其饱和度和亮度，使其更符合 Shadcn/ui 的色板，看起来更沉稳。
    *   **文字颜色：** 使用不同灰度来区分信息层级。主标题用深灰色，副标题和说明用中度灰色。
*   **字体：**
    *   请使用一款清晰、现代的无衬线字体，例如 **Inter** 或 **Geist** (Vercel新开源的字体，Shadcn/ui 正在使用)。

**4. 具体组件优化 (Component Redesign)**

请重点参考 Shadcn/ui 中的以下组件进行重新设计：

*   **卡片 (Card):**
    *   **参考链接:** https://ui.shadcn.com/docs/components/card
    *   **要求：**
        *   为【早餐】、【午餐】、【晚餐】的推荐内容分别创建一个独立的Card。
        *   每个Card都应包含`CardHeader`（带`CardTitle`和`CardDescription`）、`CardContent`和`CardFooter`（如果需要）。
        *   **例如，午餐卡片：**
            *   `CardTitle`: 午餐推荐 🕛
            *   `CardContent`: 包含蛋白质、碳水等份量列表。列表项之间要有清晰的布局和间距。
        *   Card之间要有**足够的垂直间距**（如`1.5rem`或`24px`），营造呼吸感。

*   **表单元素 (Input & Button):**
    *   **参考链接:**
        *   **Input:** https://ui.shadcn.com/docs/components/input
        *   **Button:** https://ui.shadcn.com/docs/components/button
        *   **Radio Group (用于目标选择):** https://ui.shadcn.com/docs/components/radio-group
    *   **要求：**
        *   **目标选择：** 使用 Shadcn/ui 的 `Radio Group` 或自定义的 `Card` 组合。当用户选择一个选项时，该卡片应有明确的视觉状态变化（如边框变绿）。
        *   **输入框：** 采用其简洁的输入框样式，有清晰的边框、内边距和`focus`状态（点击时边框变色）。
        *   **按钮：** 重新设计“完成，开始规划”按钮，使其符合 Shadcn/ui 的风格——简洁的形状、合适的尺寸和悬停/点击效果。

**5. 修正后的布局示例 (基于你的要求)**

**设置页 (Setup Page):**

```
[水平居中，最大宽度640px的容器]
  [H1标题] 一拳搞定营养餐 👊
  [H2副标题] 还在算热量？...

  [Card组件]
    [CardHeader]
      [CardTitle] 你的主要目标是？
    [CardContent]
      [Radio Group，垂直排列]
        [选项1: 卡片形式] 🔥 减脂塑形
        [选项2: 卡片形式] 💚 均衡营养 (说明文字在此卡片内)
        [选项3: 卡片形式] 💪 增肌增重

  [Card组件]
    [CardHeader]
      [CardTitle] 你的基本信息？
    [CardContent]
      [Grid布局，两列]
        [列1: 身高输入框 + 标签]
        [列2: 体重输入框 + 标签]

  [Button组件，绿色主色调] 完成，开始规划
```

**规划页 (Dashboard Page):**

```
[水平居中，最大宽度640px的容器]
  [页面顶部: Logo 和 "重新设置" 按钮]

  [Card组件]
    [CardHeader]
      [CardTitle] 早餐推荐 ☀️
    [CardContent]
      [列表: 蛋白质、碳水份量]

  [Card组件]
    [CardHeader]
      [CardTitle] 午餐推荐 🕛
    [CardContent]
      [列表: 蛋白质、碳水、蔬菜、脂肪份量]

  [Card组件]
    [CardHeader]
      [CardTitle] 晚餐推荐 🌙
    [CardContent]
      [列表: ...]
```

希望这份详细的指令能帮助你理解我想要的最终效果。期待看到一个崭新的、专业的“一拳膳食”！如果有任何疑问，随时沟通。